<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.89.0">
<meta name=description content>
<title>TryFunction NET Exception Handling in CAL :: BC AL Help</title>
<link href=/AL-Dev-Help/css/nucleus.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/fontawesome-all.min.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/featherlight.min.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/perfect-scrollbar.min.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/auto-complete.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/theme.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/theme-blue.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/variant.css?1636037955 rel=stylesheet>
<link href=/AL-Dev-Help/css/print.css?1636037955 rel=stylesheet media=print>
<script src=/AL-Dev-Help/js/jquery.min.js?1636037955></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
</head>
<body data-url=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/tryfunction-net-exception-handling-in-cal/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href=/AL-Dev-Help/ style="color:#f5f5f5;font-family:novacento sans wide,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:700;margin-top:-2px">
BC AL Help . dev
</a>
<i style=color:#f5f5f5>Code is Poetry</i>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script src=/AL-Dev-Help/js/lunr.min.js?1636037955></script>
<script src=/AL-Dev-Help/js/auto-complete.js?1636037955></script>
<script>var index_url="/AL-Dev-Help/index.json",root_url="/",baseUri=root_url.replace(/\/$/,'')</script>
<script src=/AL-Dev-Help/js/search.js?1636037955></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/AL-Dev-Help/welcome/ title=Welcome class=dd-item><a href=/AL-Dev-Help/welcome/><b><i class="fas fa-home"></i> </b>Welcome</a><ul></ul></li>
<li data-nav-id=/AL-Dev-Help/bcpatterns/ title="BC Patterns" class=dd-item><a href=/AL-Dev-Help/bcpatterns/><b><i class="fas fa-clone"></i> </b>BC Patterns</a><ul></ul></li>
<li data-nav-id=/AL-Dev-Help/bcbestpractices/ title="BC Dev. Best Practices" class=dd-item><a href=/AL-Dev-Help/bcbestpractices/><b><i class="fas fa-medal"></i> </b>BC Dev. Best Practices</a><ul></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/ title="NAV Patterns Archive" class="dd-item parent"><a href=/AL-Dev-Help/navpatterns/><b><i class="fas fa-save"></i> </b>NAV Patterns Archive</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/ title="1. Patterns" class="dd-item parent"><a href=/AL-Dev-Help/navpatterns/1-patterns/>1. Patterns</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/activity-log/ title="Activity Logs" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/activity-log/>Activity Logs</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/argument-table/ title="Argument Table" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/argument-table/>Argument Table</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/blocked-entity/ title="Blocked Entity" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/blocked-entity/>Blocked Entity</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/blocked-entity/data-driven-blocked-entity/ title="Data Driven Blocked Entity" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/blocked-entity/data-driven-blocked-entity/>Data Driven Blocked Entity</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/cached-web-service-calls/ title="Cached Web Server Calls" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/cached-web-service-calls/>Cached Web Server Calls</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/conditional-cascading-update/ title="Conditional Cascading Update" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/conditional-cascading-update/>Conditional Cascading Update</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/copy-document/ title="Copy Document" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/copy-document/>Copy Document</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/create-data-from-templates/ title="Create Data from Templates" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/create-data-from-templates/>Create Data from Templates</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/create-urls-to-nav-clients/ title="Create URLs to NAV Clients" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/create-urls-to-nav-clients/>Create URLs to NAV Clients</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/creating-custom-charts/ title="Creating Custom Charts" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/creating-custom-charts/>Creating Custom Charts</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/cross-session-events/ title="Cross Session Events" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/cross-session-events/>Cross Session Events</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/currently-active-record/ title="Currently Active Record" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/currently-active-record/>Currently Active Record</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/data-migration-facade/ title="Data Migration Facade" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/data-migration-facade/>Data Migration Facade</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/discovery-event/ title="Discovery Event" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/discovery-event/>Discovery Event</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/document/ title=Document class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/document/>Document</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/easy-update-of-setup-or-supplementary-information/ title="Easy Update Of Setup Or Supplementary Information" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/easy-update-of-setup-or-supplementary-information/>Easy Update Of Setup Or Supplementary Information</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/error-message-processing/ title="Error Message Processing" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/error-message-processing/>Error Message Processing</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/extending-the-role-center-headlines/ title="Extending the Role Center Headlines" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/extending-the-role-center-headlines/>Extending the Role Center Headlines</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/feature-localization-for-data-structures/ title="Feature Localization For Data Structures" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/feature-localization-for-data-structures/>Feature Localization For Data Structures</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/hooks/ title=Hooks class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/hooks/>Hooks</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/implementation-of-surrogate-keys-using-autoincrement-pattern/ title="Surrogate keys using Autoincrement Pattern" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/implementation-of-surrogate-keys-using-autoincrement-pattern/>Surrogate keys using Autoincrement Pattern</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/instructions-in-the-ui/ title="Instructions in the UI" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/instructions-in-the-ui/>Instructions in the UI</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/integration-of-addresses/ title="Integration of Addresses" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/integration-of-addresses/>Integration of Addresses</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/journal-error-processing/ title="Journal Error Processing" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/journal-error-processing/>Journal Error Processing</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/journal-template-batch-line/ title="Journal Template Batch Line" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/journal-template-batch-line/>Journal Template Batch Line</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/master-data/ title="Master Data" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/master-data/>Master Data</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/multi-file-download/ title="Multi-file Download" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/multi-file-download/>Multi-file Download</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/multi-page-list/ title="Multi-Page List" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/multi-page-list/>Multi-Page List</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/multilanguage-application-data/ title="Multilanguage Application Data" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/multilanguage-application-data/>Multilanguage Application Data</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/ title="NET Exception Handling in CAL" class="dd-item parent"><a href=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/>NET Exception Handling in CAL</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/tryfunction-net-exception-handling-in-cal/ title="TryFunction NET Exception Handling in CAL" class="dd-item active"><a href=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/tryfunction-net-exception-handling-in-cal/>TryFunction NET Exception Handling in CAL</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/no-series/ title="No Series" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/no-series/>No Series</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/notifications/ title=Notifications class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/notifications/>Notifications</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/notifications/in-context-notifications/ title="In-context Notifications" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/notifications/in-context-notifications/>In-context Notifications</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/notifications/notification-lifecycle-management-pattern/ title="Notification Lifecycle Management Pattern" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/notifications/notification-lifecycle-management-pattern/>Notification Lifecycle Management Pattern</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/observer/ title=Observer class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/observer/>Observer</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/posting-routine-select-behavior/ title="Posting Routine - Select Behavior" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/posting-routine-select-behavior/>Posting Routine - Select Behavior</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/product-name/ title="Product Name" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/product-name/>Product Name</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/queries/ title=Queries class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/queries/>Queries</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/queries/select-distinct-with-queries/ title="SELECT DISTINCT with Queries" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/queries/select-distinct-with-queries/>SELECT DISTINCT with Queries</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/queries/use-queries-to-detect-duplicate-records/ title="use Queries to Detect Duplicate Records" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/queries/use-queries-to-detect-duplicate-records/>use Queries to Detect Duplicate Records</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/queries/use-queries-to-replace-nested-loops/ title="Use Queries to Replace Nested Loops" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/queries/use-queries-to-replace-nested-loops/>Use Queries to Replace Nested Loops</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/read-once-initialization-and-validation/ title="Read-once Initialization and Validation" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/read-once-initialization-and-validation/>Read-once Initialization and Validation</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/released-entity/ title="Released Entity" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/released-entity/>Released Entity</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/report-selection/ title="Report Selection" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/report-selection/>Report Selection</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/security/ title=Security class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/security/>Security</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/setup-specificity-fallback/ title="Setup Specificity Fallback" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/setup-specificity-fallback/>Setup Specificity Fallback</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/silent-file-upload-and-download/ title="Silent File Upload and Download" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/silent-file-upload-and-download/>Silent File Upload and Download</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/singleton/ title=Singleton class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/singleton/>Singleton</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-codeunit/ title="Singleton Codeunit" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-codeunit/>Singleton Codeunit</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-table/ title="Singleton Table" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-table/>Singleton Table</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-table/cue-table/ title="Cue Table" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-table/cue-table/>Cue Table</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-table/setup-table/ title="Setup Table" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/singleton/singleton-table/setup-table/>Setup Table</a></li></ul></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/standard-journal/ title="Standard Journal" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/standard-journal/>Standard Journal</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/temporary-dataset-report/ title="Temporary Dataset Report" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/temporary-dataset-report/>Temporary Dataset Report</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/totals-and-discounts-on-subpages-sales-and-purchases/ title="Totals and Discounts on Subpages Sales and Purchases" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/totals-and-discounts-on-subpages-sales-and-purchases/>Totals and Discounts on Subpages Sales and Purchases</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/transfer-custom-fields/ title="Transfer Custom Fields" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/transfer-custom-fields/>Transfer Custom Fields</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/1-patterns/variant-facade/ title="Variant Facade" class=dd-item><a href=/AL-Dev-Help/navpatterns/1-patterns/variant-facade/>Variant Facade</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/2-anti-patterns/ title="2. Anti-Patterns" class=dd-item><a href=/AL-Dev-Help/navpatterns/2-anti-patterns/>2. Anti-Patterns</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/2-anti-patterns/nav-upgrade/ title="Nav Upgrade" class=dd-item><a href=/AL-Dev-Help/navpatterns/2-anti-patterns/nav-upgrade/>Nav Upgrade</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/2-anti-patterns/reusable-bugs/ title="Reusable Bugs" class=dd-item><a href=/AL-Dev-Help/navpatterns/2-anti-patterns/reusable-bugs/>Reusable Bugs</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ title="3. CAL Coding Guidelines" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/>3. CAL Coding Guidelines</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/design/ title=Design class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/design/>Design</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/internally-used-dot-net-types/ title="Internally-used DotNet Types" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/internally-used-dot-net-types/>Internally-used DotNet Types</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/internationalization/ title=Internationalization class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/internationalization/>Internationalization</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/internationalization/using-calcdate/ title="Using Calcdate" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/internationalization/using-calcdate/>Using Calcdate</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/ title=Localizability class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/>Localizability</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/captionml-for-system-tables/ title="CaptionML on System Pages" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/captionml-for-system-tables/>CaptionML on System Pages</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/fieldcaption-and-tablecaption/ title="FIELDCAPTION and TABLECAPTION" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/fieldcaption-and-tablecaption/>FIELDCAPTION and TABLECAPTION</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/global-text-constants/ title="Global Text Constants" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/global-text-constants/>Global Text Constants</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/use-text-constants/ title="Use Text Constants" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/use-text-constants/>Use Text Constants</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/using-optioncaptionml/ title="Using OptionCaptionML" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/localizability/using-optioncaptionml/>Using OptionCaptionML</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/ title=Readability class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/>Readability</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/begin-as-an-afterword/ title="Begin as an 'After Word'" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/begin-as-an-afterword/>Begin as an 'After Word'</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/begin-end/ title="Begin-End - Compound Only" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/begin-end/>Begin-End - Compound Only</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/binary-operator-line-start/ title="Binary Operator to Start Line" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/binary-operator-line-start/>Binary Operator to Start Line</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/blank-lines/ title="Blank Lines.md" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/blank-lines/>Blank Lines.md</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/case-actions/ title="CASE Action" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/case-actions/>CASE Action</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/colon-usage-in-case/ title="Colon usage in CASE" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/colon-usage-in-case/>Colon usage in CASE</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/comments-curly-brackets/ title="Comments inside Curly Brackets" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/comments-curly-brackets/>Comments inside Curly Brackets</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/comments-spacing/ title="Comment Spacing" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/comments-spacing/>Comment Spacing</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/end-else-pair/ title="END ELSE Pair" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/end-else-pair/>END ELSE Pair</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/indentation/ title=Indentation class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/indentation/>Indentation</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/keyword-pairs-indentation/ title="Keyword Pairs - Indentation" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/keyword-pairs-indentation/>Keyword Pairs - Indentation</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/line-start-keywords/ title="Line Start Keywords" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/line-start-keywords/>Line Start Keywords</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/lonely-repeat/ title="Lonely Repeat" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/lonely-repeat/>Lonely Repeat</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/named-invocations/ title="Named Invocations" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/named-invocations/>Named Invocations</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/nested-withs/ title="Nested WITHs" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/nested-withs/>Nested WITHs</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/one-statement-per-line/ title="One Statement Per Line" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/one-statement-per-line/>One Statement Per Line</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/separate-if-and-else/ title="Separate IF and ELSE" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/separate-if-and-else/>Separate IF and ELSE</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/spacing-binary-operators/ title="Spacing Binary Operators" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/spacing-binary-operators/>Spacing Binary Operators</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/spacing-brackets-and/ title="Spacing Brackets and ::" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/spacing-brackets-and/>Spacing Brackets and ::</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/spacing-unary-operators/ title="Spacing Unary Operators" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/spacing-unary-operators/>Spacing Unary Operators</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/suggested-abbreviations/ title="Suggested Abbreviations" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/suggested-abbreviations/>Suggested Abbreviations</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/temporary-variable-naming/ title="Temporary Variable Naming" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/temporary-variable-naming/>Temporary Variable Naming</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/textconst-suffixes/ title="TextConst Suffixes" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/textconst-suffixes/>TextConst Suffixes</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unary-operator-line-end/ title="Unary Operator Line End" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unary-operator-line-end/>Unary Operator Line End</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-compound-parenthesis/ title="Unnecessary Compound Parenthesis" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-compound-parenthesis/>Unnecessary Compound Parenthesis</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-else/ title="Unnecessary ELSE" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-else/>Unnecessary ELSE</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-function-parenthesis/ title="Unnecessary Function Parenthesis" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-function-parenthesis/>Unnecessary Function Parenthesis</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-separators/ title="Unnecessary Separators" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-separators/>Unnecessary Separators</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-truefalse/ title="Unnecessary TRUE/FALSE" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/unnecessary-truefalse/>Unnecessary TRUE/FALSE</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/variable-already-scoped/ title="Variable Already Scoped" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/variable-already-scoped/>Variable Already Scoped</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/variable-naming/ title="Variable Naming" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/variable-naming/>Variable Naming</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/variables-declarations-order/ title="Variables Declarations Order" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/readability/variables-declarations-order/>Variables Declarations Order</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/ title=UX class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/>UX</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/actions-images/ title="Actions - Images" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/actions-images/>Actions - Images</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/confirm/ title=CONFIRM class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/confirm/>CONFIRM</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/fielderror/ title=FIELDERROR class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/fielderror/>FIELDERROR</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/message-and-error/ title="MESSAGE and ERROR" class=dd-item><a href=/AL-Dev-Help/navpatterns/3-cal-coding-guidelines/ux/message-and-error/>MESSAGE and ERROR</a></li></ul></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/4-get-involved/ title="(OLD) Get Involved" class=dd-item><a href=/AL-Dev-Help/navpatterns/4-get-involved/>(OLD) Get Involved</a><ul>
<li data-nav-id=/AL-Dev-Help/navpatterns/4-get-involved/code-of-conduct/ title="Code of Conduct" class=dd-item><a href=/AL-Dev-Help/navpatterns/4-get-involved/code-of-conduct/>Code of Conduct</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/4-get-involved/patterns-authors/ title="Patterns Authors" class=dd-item><a href=/AL-Dev-Help/navpatterns/4-get-involved/patterns-authors/>Patterns Authors</a></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/4-get-involved/template-for-writing-nav-design-patterns/ title="Template for writing Nav Design Patterns" class=dd-item><a href=/AL-Dev-Help/navpatterns/4-get-involved/template-for-writing-nav-design-patterns/>Template for writing Nav Design Patterns</a></li></ul></li>
<li data-nav-id=/AL-Dev-Help/navpatterns/related-links/ title="Related Links" class=dd-item><a href=/AL-Dev-Help/navpatterns/related-links/>Related Links</a></li></ul></li>
</ul>
<div id=shortcuts>
<div class=nav-title>More</div>
<ul>
<li><a class=padding href=https://discord.gg/4wbfNv3><i class="fab fa-discord"></i> BC Discord</a></li>
<li><a class=padding href=https://github.com/BC-Design-Patterns/AL-Dev-Help><i class="fab fa-github"></i> GitHub repo</a></li>
</ul>
</div>
<div id=footer>
<p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p>
</div>
</div>
</nav>
<div id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div id=top-bar>
<div id=top-github-link>
<a class=github-link title="Edit this page" href=https://github.com/BC-Design-Patterns/AL-Dev-Help/edit/main/content/NAVPatterns/1-patterns/net-exception-handling-in-cal/tryfunction-net-exception-handling-in-cal/index.md target=blank>
<i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span>
</a>
</div>
<div id=breadcrumbs>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<ol class=links itemscope itemtype=http://schema.org/BreadcrumbList>
<meta itemprop=itemListOrder content="Descending">
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="5"><a itemprop=item href=/AL-Dev-Help/><span itemprop=name>Home</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/AL-Dev-Help/navpatterns/><span itemprop=name>NAV Patterns Archive</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/AL-Dev-Help/navpatterns/1-patterns/><span itemprop=name>1. Patterns</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/><span itemprop=name>NET Exception Handling in CAL</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/tryfunction-net-exception-handling-in-cal/ aria-disabled=true><span itemprop=name>TryFunction NET Exception Handling in CAL</span></a></li>
</ol>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#abstract>Abstract</a></li>
<li><a href=#description>Description</a>
<ul>
<li><a href=#when-to-use-it>When to Use It</a></li>
<li><a href=#diagram>Diagram</a></li>
</ul>
</li>
<li><a href=#usage>Usage</a></li>
<li><a href=#nav-specific-example>NAV Specific Example</a>
<ul>
<li><a href=#overview>Overview</a></li>
<li><a href=#code-sample>Code Sample</a></li>
</ul>
</li>
<li><a href=#nav-usages>NAV Usages</a></li>
</ul>
</nav>
</div>
</div>
</div>
<div id=head-tags>
</div>
<main id=body-inner>
<h1>TryFunction NET Exception Handling in CAL</h1>
<p><em>Originally by Mostafa Balat, Microsoft Development Center Copenhagen</em></p>
<h2 id=abstract>Abstract</h2>
<p>When there is a need to use .NET classes within C/AL, one of the main challenges is to handle the exceptions the methods of these .NET classes may throw. Eventually, if not handled, they will basically bubble up as runtime errors, halting the current operation a user is doing without having a chance to properly display errors in a user-friendly format.</p>
<h2 id=description>Description</h2>
<p>Using the .NET classes in order to extend NAV&rsquo;s functionality usually triggers the need to create an add-on assembly. This is a pretty powerful approach and opens the door for empowering NAV with new and extra functionality while harnessing the full power of .NET.</p>
<p>For example, integration with a Web service into NAV can be done to extend NAV&rsquo;s functionality or benefit from a service model offered through a 3rd party. To do so, it is possible to write a .NET add-in to handle the required bi-directional communication between NAV and the Web service. Alternatively, the implementation itself can be done in C/AL, with no add-in dependency. The latter option simplifies customization, deployment and upgradeability. Additionally, it builds up on the knowledge NAV developers have with C/AL programming.</p>
<p>On the other hand, not using an add-in exposes NAV to runtime errors due to unhandled exceptions that get thrown at different levels. The first is the communication layer, in which HTTP requests and responses are exchanged. The second is the business logic layer, at which the content of the requests and response is being prepared and groomed using XML Elements and being retrieved or edited based on the respective XPaths.</p>
<h3 id=when-to-use-it>When to Use It</h3>
<p>When .NET classes are used, they may throw exceptions upon failure. Some of these exceptions cannot pre-checked (e.g. like existence of a file on disk) and will only be figured out at runtime. Eventually, to present the error reason to a user and explain what needs to be done to address it, the exception needs to be handled gracefully. This also protects the client for unexpected crashes that may deteriorate the user experience.</p>
<h3 id=diagram>Diagram</h3>
<p><a href=TryFunction_5F00_DotNet_5F00_Exception_5F00_Handling_5F00_in_5F00_CAL.png><img src=TryFunction_5F00_DotNet_5F00_Exception_5F00_Handling_5F00_in_5F00_CAL.png alt=" "></a></p>
<h2 id=usage>Usage</h2>
<p>A Try-Catch-Finally statement does not exist in C/AL. The alternative is to run the code consuming .NET objects within a TryFunction, and handle the runtime errors, as follows:</p>
<ol>
<li>Write the code that uses the .NET classes in a procedure whose TryFunction property is set to Yes.</li>
<li>Invoke the TryFunction like any other procedure within the code.</li>
<li>Handle the return value of the TryFunction within an <strong>IF..THEN</strong> statement.</li>
<li>Write the exception handling code in a function, and call it when the return value for the TryFunction is <strong>FALSE</strong>.</li>
<li>The exception handling function should determine which exception to handle, and pass this over to the <strong>COD1291 DotNet Exception Handler</strong> codeunit.</li>
</ol>
<p>When an exception is thrown, it is already wrapped up within an NAV exception. This means the real exception to look for is retrievable through the <strong>InnerException</strong> property of the NAV exception. Then, the next step would be to properly determine the type of that exception, and act accordingly. The <strong>COD1291 DotNet Exception Handler</strong> codeunit takes care of looping through the nested levels of inner exceptions, digging for an exception with the expected type. If found, it is retrieved; otherwise, the main (outer) exception&rsquo;s message is retrieved.</p>
<h2 id=nav-specific-example>NAV Specific Example</h2>
<h3 id=overview>Overview</h3>
<p>The exception handling pattern is implemented in the integration with a web service for bank file format conversion. Within the respective &ldquo;External Data Handling Codeunit&rdquo; for that web service, communication through SOAP requests is required. Eventually, the HTTP web request and response .NET classes are used for that purpose.</p>
<p>For instance, if a failure to establish a connection to the web service due to lack of Internet access, a <strong>WebException</strong> is thrown with the relevant error details. <strong>COD1290 Web Service Mgt.</strong> codeunit wraps up the required functionality to interact with a web service in C/AL, handling all the required plumping work to send web requests, receive web responses, and extract valid and error details from the web response.</p>
<h3 id=code-sample>Code Sample</h3>
<p>The &ldquo;External Data Handling Codeunit&rdquo; is a consumer of <strong>COD1290 Web Service Mgt.</strong> codeunit. If a runtime exception occurs, it gets handled as follows:</p>
<pre><code>\[TryFunction\]
PROCEDURE SendRequestToWebService@17();
VAR
WebRequestHelper@1000 : Codeunit 1299;
HttpWebRequest@1007 : DotNet &quot;'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Net.HttpWebRequest&quot;;
HttpStatusCode@1002 : DotNet &quot;'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Net.HttpStatusCode&quot;;
ResponseHeaders@1001 : DotNet &quot;'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Collections.Specialized.NameValueCollection&quot;;
ResponseInStream@1006 : InStream;
BEGIN
CheckGlobals;
BuildWebRequest(GlobalURL,HttpWebRequest);
ResponseInStreamTempBlob.INIT;
ResponseInStreamTempBlob.Blob.CREATEINSTREAM(ResponseInStream);
CreateSoapRequest(HttpWebRequest.GetRequestStream,GlobalRequestBodyInStream,GlobalUsername,GlobalPassword);
WebRequestHelper.GetWebResponse(HttpWebRequest,HttpWebResponse,ResponseInStream,HttpStatusCode,ResponseHeaders,GlobalProgressDialogEnabled);
ExtractContentFromResponse(ResponseInStream,ResponseBodyTempBlob);
END;

LOCAL PROCEDURE SendDataToConversionService@1(VAR PaymentFileTempBlob@1003 : Record 99008535;BodyTempBlob@1004 : Record 99008535;PostingExch@1007 : Record 1220);
VAR
BankDataConvServiceSetup@1000 : Record 1260;
WebServiceRequestMgt@1001 : Codeunit 1290;
BodyInStream@1005 : InStream;
ResponseInStream@1002 : InStream;
BEGIN
IF NOT BodyTempBlob.Blob.HASVALUE THEN
ERROR(NoRequestBodyErr);
PrepareSOAPRequestBody(BodyTempBlob);
COMMIT;
BankDataConvServiceSetup.GET;
BodyTempBlob.Blob.CREATEINSTREAM(BodyInStream);
WebServiceRequestMgt.SetGlobals(BodyInStream,
BankDataConvServiceSetup.&quot;Service URL&quot;,BankDataConvServiceSetup.&quot;User Name&quot;,BankDataConvServiceSetup.GetPassword);
IF NOT WebServiceRequestMgt.SendRequestToWebService THEN
WebServiceRequestMgt.ProcessFaultResponse;
WebServiceRequestMgt.GetResponseContent(ResponseInStream);
CheckIfErrorsOccurred(ResponseInStream,PostingExch);
ReadContentFromResponse(PaymentFileTempBlob,ResponseInStream);
END;

PROCEDURE ProcessFaultResponse@15();
VAR
XMLDOMMgt@1006 : Codeunit 6224;
DotNetExceptionHandler@1000 : Codeunit 1291;
WebException@1005 : DotNet &quot;'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Net.WebException&quot;;
WebExceptionStatus@1004 : DotNet &quot;'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Net.WebExceptionStatus&quot;;
XmlDoc@1003 : DotNet &quot;'System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Xml.XmlDocument&quot;;
HttpWebResponseError@1007 : DotNet &quot;'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Net.HttpWebResponse&quot;;
HttpStatusCode@1008 : DotNet &quot;'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Net.HttpStatusCode&quot;;
ResponseInputStream@1002 : InStream;
BEGIN
DotNetExceptionHandler.Collect;
IF NOT DotNetExceptionHandler.CastToType(WebException,GETDOTNETTYPE(WebException)) THEN
DotNetExceptionHandler.Rethrow;
IF NOT WebException.Status.Equals(WebExceptionStatus.ProtocolError) THEN
ERROR(WebException.Message);
ResponseInputStream := WebException.Response.GetResponseStream;
DebugLogStreamToTempFile(ResponseInputStream,'WebExceptionResponse',TempDebugLogTempBlob);
HttpWebResponseError := WebException.Response;
IF NOT (HttpWebResponseError.StatusCode.Equals(HttpStatusCode.Found) OR
HttpWebResponseError.StatusCode.Equals(HttpStatusCode.InternalServerError))
THEN
ERROR(WebException.Message);
XmlDoc := XmlDoc.XmlDocument;
XmlDoc.Load(ResponseInputStream);
ERROR(XMLDOMMgt.FindNodeTextWithNamespace(XmlDoc.DocumentElement,FaultStringXmlPathTxt,'soap',SoapNamespaceTxt));
END;

OBJECT Codeunit 1291 DotNet Exception Handler
{
OBJECT-PROPERTIES
{
Date=;
Time=;
Version List=;
}
PROPERTIES
{
OnRun=BEGIN
END;
}
CODE
{
VAR
OuterException@1000 : DotNet &quot;'mscorlib'.System.Exception&quot;;
PROCEDURE Catch@3(VAR Exception@1002 : DotNet &quot;'mscorlib'.System.FormatException&quot;;Type@1007 : DotNet &quot;'mscorlib'.System.Type&quot;);
BEGIN
Collect;
IF NOT CastToType(Exception,Type) THEN
Rethrow;
END;
PROCEDURE Collect@1();
BEGIN
OuterException := GETLASTERROROBJECT;
END;
PROCEDURE TryCastToType@5(Type@1000 : DotNet &quot;'mscorlib'.System.Type&quot;) : Boolean;
VAR
Exception@1001 : DotNet &quot;'mscorlib'.System.FormatException&quot;;
BEGIN
EXIT(CastToType(Exception,Type));
END;
PROCEDURE CastToType@2(VAR Exception@1002 : DotNet &quot;'mscorlib'.System.FormatException&quot;;Type@1007 : DotNet &quot;'mscorlib'.System.Type&quot;) : Boolean;
BEGIN
Exception := OuterException;
REPEAT
IF Type.Equals(Exception.GetType()) THEN
EXIT(TRUE);
Exception := Exception.InnerException;
UNTIL ISNULL(Exception);
EXIT(FALSE);
END;
PROCEDURE Rethrow@4();
BEGIN
IF NOT ISNULL(OuterException.InnerException) THEN
ERROR(OuterException.InnerException.Message);
ERROR(OuterException.Message);
END;
BEGIN
END.
}
}
</code></pre>
<h2 id=nav-usages>NAV Usages</h2>
<p>The <strong>CO1291 DotNet Exception Handler</strong> codeunit has been used for the Web service integration required for:</p>
<ol>
<li>Payment Export from the Payment Journal for creating bank-specific payment files.</li>
<li>Bank Statement Import on the Bank Acc. Reconciliation card for importing the content of bank-specific statements.</li>
<li>Bank name lookup on the Bank Account card for dynamically identifying the format to use to generate a bank-specific payment file.</li>
</ol>
<footer class=footline>
</footer>
</main>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/AL-Dev-Help/navpatterns/1-patterns/net-exception-handling-in-cal/ title="NET Exception Handling in CAL"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/AL-Dev-Help/navpatterns/1-patterns/no-series/ title="No Series"><i class="fa fa-chevron-right"></i></a>
</div>
</div>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/AL-Dev-Help/js/clipboard.min.js?1636037955></script>
<script src=/AL-Dev-Help/js/perfect-scrollbar.min.js?1636037955></script>
<script src=/AL-Dev-Help/js/perfect-scrollbar.jquery.min.js?1636037955></script>
<script src=/AL-Dev-Help/js/jquery.svg.pan.zoom.js?1636037955></script>
<script src=/AL-Dev-Help/js/featherlight.min.js?1636037955></script>
<script src=/AL-Dev-Help/js/modernizr.custom-3.6.0.js?1636037955></script>
<script src=/AL-Dev-Help/js/relearn.js?1636037955></script>
</body>
</html>